One last note - the KbCheck section that allows an esc key to quit doesn't appear to be working on my computer. I'm fairly sure it was working on the touchscreen before, but I could be wrong! So don't copy that (or if you do and figure out how to fix it, let me know). My workaround was to build in an alternative quit method by clicking the top left corner of the screen.

Rosa Li, PhD
Postdoctoral Associate
Duke Center for Interdisciplinary Decision Sciences
https://sites.google.com/view/rosaliphd


On Wed, Mar 27, 2019 at 3:04 PM Rosa Li <rosa.li@duke.edu> wrote:
Hi Alex,

Just discovered that the KbQueueStart code doesn't work on my non-touchscreen computer. Annoying! Below is the code with the touchscreen stuff commented out to work on my computer. To get it to work on the touchscreen, uncomment everything with KbQueue..., and comment out the pressed = GetClicks() line.

%wait for touch on chosen box
    %KbQueueStart(dev.mouseIdx(1));
    useableClick = 0;
    while useableClick == 0 %wait for click inside designated area
        %pressed = KbQueueCheck(dev.mouseIdx(1));
        pressed = GetClicks();
        if pressed %if touched
            [x, y, buttons] = GetMouse(dev.win); %get touch location
            if (x > chosenBox(1) && x < chosenBox(3) && y > chosenBox(2) && y < chosenBox(4)) %click inside chosen box
                useableClick = 1;
            end %click inside chosen box
        end %if touched

        [keyIsDown, secs, keyCode] = KbCheck; %check for esc while waiting for mouseclick
        if keyIsDown
            if(find(keyCode) == params.button.esckey) %esc to quit
                quitProg = 1;
                return
            end
        end
    end %click inside a designated area
    %KbQueueStop(dev.mouseIdx(1));
